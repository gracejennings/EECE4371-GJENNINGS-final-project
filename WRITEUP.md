# Final Project Write Up: Spotifeatures

### The Project: Music Analytics and Suggestions with the Spotify API

This project is a TCP Client/Server application. The Client is the App where a browser is opened for a user to log onto their Spotify account and authorizes the application to access their data. If the access is granted, the App establishes a connection to the server and sends the access code to the Server. The Server holds all of the general analytics and all of the API calls after authentication. Specifically, the server performs three main functions: finding the Spotify users' 50 top artists played, finding the Spotify users' 50 top songs played, and recommending a playlist from another user on the server based on their top artists. 

I chose this project because I spend a lot of my time on Spotify listening to music and looking for new music. Spotify has recommendation features where is recommends Spotify-created playlists, but I have always wanted mine to recommend actual other users' playlists that are similar to my tastes. I also really like the 'Year in Review' that Spotify releases for each user every December, but I want to be able to constantly see my top songs and top artists. 

With my project, Spotifeatures will recommend a playlist from one of the other users that has joined the server based on the current user's most listened to artists. It does so by 'scoring' each of the playlists that the Server has stored by how many songs they contain of your top artists. Then the Server recommends the playlist with the top 'score.' This allows the current user to discover new music by related artists. 

### Technical Challenges and Solutions:

**_Server/Client Communication_**: I decided to use TCP for my client/server communication and developed a protocol for communication. The App (client) authenticates the user. The App sends a `JOIN` message to the Server and the Server starts a Server Thread for each client that joins. The Server Thread sends request messages for the user access token and refresh token from the App to configure the Spotify API in the ServerThread. The App client communicates with the ServerThread through the menu options shown in the App. The ServerThread sends all of the requested information back to the App. For example, when the App requests "songs" the server reads "songs" and creates an array of the user's top songs. It then turns this into a String list separated by commas and sends it back to the App. The App parses the message and prints each individual song. 

**_Authentication_**: One of the most significant challenges that I faced in the project was the authentication of my application and access approval from individual Spotify users. With the Spotify Web API I had to register my application with Spotify Developers to get a _clientID_ and _clientSecret_ that I had to use to authenticate my Spotify API requests.I used a java wrapper for the Spotify API to simplify the process of making requests for the information about the users once they allowed access.

**_Server Storage_**: I separated all of the API calls and processing to the Server side of the project. Since all Spotify user's have the same properties, I defined a User class to store and access information about each individual user. I stored each user that connected with the Server in a set container in the Server. I also stored the top tracks, top artists, and users' playlists in the Server so that they would remain even after a client disconnected. This was what allowed me to provide a recommended playlist for user, based on the playlists already stored in the Server. 

**_Display/UI_**: The UI on my application is not ideal. I was more focused on the communication and Client/Server and storage so I opted to make a command line application. I struggled here when I was requesting access from Spotify accounts because I was not operating on a website. I opted instead to open a browser where the user logs into their Spotify account, grants access, and then redirects to a local host URI. This needs to be copied from the browser into the command line application where the App parses it to find the access code. 

